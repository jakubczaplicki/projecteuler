'''https://medium.com/@bearsandsharks/i-failed-a-twitter-interview-52062fbb534b"In this picture we have walls of different heights. This picture is represented by an array of integers, where the value at each index is the height of the wall. The picture above is represented with an array as [2,5,1,2,3,4,7,7,6]."              * *              * * *    *         * * *    *       * * * *    *     * * * * *  * *   * * * * * *  * * * * * * * * *([2,5,1,2,3,4,7,7,6], 10),"Now imagine it rains. How much water is going to be accumulated in puddles between walls?""We count volume in square blocks of 1X1. So in the picture above, everything to the left of index 1 spills out. Water to the right of index 7 also spills out. We are left with a puddle between 1 and 6 and the volume is 10."              * *              * * *    *         * * *    *       * * * *    *     * * * * *  * *   * * * * * *  * * * * * * * * *([2,5,1,2,3,4,7,7,6], 10),              * *              * * *    *         * * *   *    *       * * * *   *    *     * * * * * * *  * *   * * * * * * * *  * * * * * * * * * * * [2,5,1,2,3,4,7,7,6,3,5]     * *   * * *   * * *         *   * * * *       *   * * * * *     *   * * * * * *   * *   * * * * * * * * * ([6,7,7,4,3,2,1,5,2]'''def solution(A):    v = True    # j..i...end    i = 1    j = 0    suma = 0    reached_min = False    N = len(A)    while i < N:        if  A[j] <= A[i]  and not reached_min:            if v: print 1, A[j], A[i], j, i            j = i            i = i + 1        elif A[j] <= A[i] and reached_min:            if v: print 2, A[j], A[i], j, i            suma = suma + A[j] * len(A[j+1:i]) - sum( A[j+1:i] )            j = i            i += 1        elif (A[j] > A[i]) and not reached_min:            if v: print 3, A[j], A[i], j, i            if i+1 == N:                break            if A[i+1] > A[i]:                if v: print True                reached_min = True            i+=1        elif (A[j] > A[i]) and reached_min:            if v: print 4, A[j], A[i], j, i            i+=1            #if A[j] < A[i-1] and A[i-2] > A[i-1]:            #    suma = suma + A[i-2] * len(A[j+1:i-1]) - sum( A[j+1:i-1] )            #    break            #we reached end but right hand side wall is lower than the left            if i == N and A[j] < A[i-1] and  A[i-2] < A[i-1]:                suma = suma + A[i-1] * len(A[j+2:i]) - sum( A[j+2:i] )                break            elif i == N and A[j] >= A[i-1] and  A[i-2] < A[i-1]:                suma = suma + A[i-1] * len(A[j+1:i]) - sum( A[j+1:i] )                break        else:            if v: print 5, A[j], A[i], j, i            j = i            i += 1            if i >= N:                break    return sumaif __name__ == "__main__":   testcases = [         ([2,5,1,2,3,4,7,7,6], 10),         ([1,0,1], 1),         ([1,0,2], 1),         ([2,0,1], 1),         ([5,0,5], 5),         ([0,1,0,1,0], 1),         ([1,0,1,0], 1),         ([1,0,1,2,0,2], 3),         ([2,5,1,2,3,4,7,7,6], 10),         ([5,1,0,1],1),                 # thanks https://news.ycombinator.com/item?id=6640085         ([2,5,1,2,3,4,7,7,6,3,5], 12), # thanks https://news.ycombinator.com/item?id=6640105         ([6,7,7,4,3,2,1,5,2], 10),         ([3,0,1,0,2], 2),         ([1,2,1], 0)         ]    for case in testcases:      w = solution(case[0])      if w == case[1]:         print "TRUE: %s holds %s" % (case[0], w)      else:         print "MISMATCH: %s holds %s (got %s)" % (case[0], case[1], w)